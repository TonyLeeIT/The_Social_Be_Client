{"ast":null,"code":"var _jsxFileName = \"H:\\\\projectreactjs\\\\the_social_12_9\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, Route, Switch } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AuthUserCtx } from \"./context/authUser\";\nimport { Auth } from \"./screens/auth/Auth\";\nimport { Home } from \"./screens/auth/home/Home\";\n\nconst App = () => {\n  const [authUser, setAuthUser] = useState(null);\n  const [isAuthenticating, setAuthenticating] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n\n    if (!jwt) {\n      history.push(\"/auth/login\");\n      return;\n    }\n\n    setAuthenticating(true);\n    axios.get(\"http://localhost:5000/auth/me\", {\n      headers: {\n        Authorization: \"Bearer \" + jwt\n      }\n    }).then(res => {\n      setAuthUser(res.data);\n    }).catch(() => {\n      setAuthUser(null);\n      history.push(\"/auth/login\");\n    }).finally(() => {\n      setAuthenticating(false);\n    });\n  }, []);\n\n  if (isAuthenticating) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 12\n      }\n    }, \"Authenticating ...\");\n  }\n\n  const authUserCtxValue = {\n    authUser: authUser,\n    setAuthUser: setAuthUser\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AuthUserCtx.Provider, {\n    value: authUserCtxValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/auth\",\n    component: Auth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    component: Home,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["H:/projectreactjs/the_social_12_9/src/App.js"],"names":["React","useState","useEffect","useHistory","Route","Switch","axios","AuthUserCtx","Auth","Home","App","authUser","setAuthUser","isAuthenticating","setAuthenticating","history","jwt","localStorage","getItem","push","get","headers","Authorization","then","res","data","catch","finally","authUserCtxValue"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,EAAqBC,KAArB,EAA4BC,MAA5B,QAA0C,kBAA1C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,IAAT,QAAqB,qBAArB;AACA,SAASC,IAAT,QAAqB,0BAArB;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAChB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACY,gBAAD,EAAmBC,iBAAnB,IAAwCb,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAMc,OAAO,GAAGZ,UAAU,EAA1B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ;;AACA,QAAI,CAACF,GAAL,EAAU;AACRD,MAAAA,OAAO,CAACI,IAAR,CAAa,aAAb;AACA;AACD;;AACDL,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAR,IAAAA,KAAK,CACFc,GADH,CACO,+BADP,EACwC;AACpCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYN;AADpB;AAD2B,KADxC,EAMGO,IANH,CAMSC,GAAD,IAAS;AACbZ,MAAAA,WAAW,CAACY,GAAG,CAACC,IAAL,CAAX;AACD,KARH,EASGC,KATH,CASS,MAAM;AACXd,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAG,MAAAA,OAAO,CAACI,IAAR,CAAa,aAAb;AACD,KAZH,EAaGQ,OAbH,CAaW,MAAM;AACbb,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,KAfH;AAgBD,GAvBQ,EAuBN,EAvBM,CAAT;;AAyBA,MAAID,gBAAJ,EAAsB;AACpB,wBAAO;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAP;AACD;;AAED,QAAMe,gBAAgB,GAAG;AACvBjB,IAAAA,QAAQ,EAAEA,QADa;AAEvBC,IAAAA,WAAW,EAAEA;AAFU,GAAzB;AAIA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEgB,gBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,SAAS,EAAEpB,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,GAAZ;AAAgB,IAAA,SAAS,EAAEC,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF,CADF;AAUD,CAhDD;;AAkDA,eAAeC,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory, Route, Switch } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport { AuthUserCtx } from \"./context/authUser\";\nimport { Auth } from \"./screens/auth/Auth\";\nimport { Home } from \"./screens/auth/home/Home\";\n\nconst App = () => {\n  const [authUser, setAuthUser] = useState(null);\n  const [isAuthenticating, setAuthenticating] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (!jwt) {\n      history.push(\"/auth/login\");\n      return;\n    }\n    setAuthenticating(true);\n    axios\n      .get(\"http://localhost:5000/auth/me\", {\n        headers: {\n          Authorization: \"Bearer \" + jwt,\n        },\n      })\n      .then((res) => {\n        setAuthUser(res.data);\n      })\n      .catch(() => {\n        setAuthUser(null);\n        history.push(\"/auth/login\");\n      })\n      .finally(() => {\n        setAuthenticating(false);\n      });\n  }, []);\n\n  if (isAuthenticating) {\n    return <div className=\"mx-auto\">Authenticating ...</div>;\n  }\n\n  const authUserCtxValue = {\n    authUser: authUser,\n    setAuthUser: setAuthUser,\n  };\n  return (\n    <div>\n      <AuthUserCtx.Provider value={authUserCtxValue}>\n        <Switch>\n          <Route path=\"/auth\" component={Auth} />\n          <Route path=\"/\" component={Home} />\n        </Switch>\n      </AuthUserCtx.Provider>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}